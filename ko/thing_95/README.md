# 사람들을 위한 테스트를 작성하라

당신은 프로덕션 코드의 일부 또는 전부를 위한 자동화된 테스트를 작성하고 있습니다. 축하합니다! 코드를 작성하기 전에 테스트를 작성하고 있나요? 더욱 좋습니다!! 이것만 해도 당신을 소프트웨어 엔지니어링 실천의 최첨단에 있는 얼리 어답터 중 하나로 만듭니다. 하지만 좋은 테스트를 작성하고 있나요? 어떻게 알 수 있을까요? 한 가지 방법은 "내가 누구를 위해 테스트를 작성하고 있는가?"라고 묻는 것입니다. 대답이 "나를 위해, 버그를 고치는 노력을 절약하기 위해" 또는 "컴파일러를 위해, 그래서 실행될 수 있도록"이라면 최선의 테스트를 작성하지 않을 가능성이 높습니다. 그러면 *누구*를 위해 테스트를 작성해야 할까요? 당신의 코드를 이해하려고 하는 사람을 위해서입니다.

좋은 테스트는 그들이 테스트하는 코드에 대한 문서 역할을 합니다. 그들은 코드가 어떻게 작동하는지 설명합니다. 각 사용 시나리오에 대해 테스트는:

1. 만족되어야 하는 컨텍스트, 시작점, 또는 사전조건을 설명합니다
2. 소프트웨어가 어떻게 호출되는지 보여줍니다
3. 검증될 예상 결과나 사후조건을 설명합니다

다른 사용 시나리오들은 이것들 각각에 대해 약간 다른 버전을 가질 것입니다. 당신의 코드를 이해하려고 하는 사람은 몇 가지 테스트를 보고 문제의 테스트들의 이 세 부분을 비교함으로써, 무엇이 소프트웨어를 다르게 행동하게 만드는지 볼 수 있어야 합니다. 각 테스트는 이 세 부분 사이의 원인과 결과 관계를 명확하게 보여줘야 합니다. 이것은 테스트에서 보이지 않는 것이 보이는 것만큼 중요하다는 것을 의미합니다. 테스트의 너무 많은 코드는 중요하지 않은 사소한 것들로 읽는 사람의 주의를 산만하게 합니다. 가능할 때마다 그런 사소한 것들을 의미 있는 메서드 호출 뒤에 숨기세요 — Extract Method 리팩토링이 당신의 가장 친한 친구입니다. 그리고 각 테스트에 특정 사용 시나리오를 설명하는 의미 있는 이름을 주어서 테스트 읽는 사람이 다양한 시나리오들이 무엇인지 이해하기 위해 각 테스트를 역공학할 필요가 없도록 하세요. 테스트 클래스와 클래스 메서드의 이름들은 함께 적어도 시작점과 소프트웨어가 어떻게 호출되는지를 포함해야 합니다. 이것은 메서드 이름들의 빠른 스캔을 통해 테스트 커버리지가 검증될 수 있게 해줍니다. 이름들이 보거나 읽기에 너무 길어지지 않는 한, 테스트 메서드 이름에 예상 결과를 포함하는 것도 유용할 수 있습니다.

당신의 테스트를 테스트하는 것도 좋은 아이디어입니다. 당신이 생각하는 오류들을 프로덕션 코드에 삽입함으로써(물론 당신이 버릴 자신만의 개인 복사본에) 그들이 당신이 생각하는 오류들을 감지하는지 확인할 수 있습니다. 그들이 도움이 되고 의미 있는 방식으로 오류를 보고하는지 확인하세요. 또한 당신의 테스트들이 당신의 코드를 이해하려고 하는 사람에게 명확하게 말하는지 확인해야 합니다. 이것을 하는 유일한 방법은 당신의 코드에 익숙하지 않은 누군가가 당신의 테스트를 읽고 무엇을 배웠는지 말하게 하는 것입니다. 그들이 말하는 것을 주의 깊게 들으세요. 그들이 무언가를 명확하게 이해하지 못했다면 아마도 그들이 그리 밝지 않아서가 아닐 것입니다. 당신이 그리 명확하지 않았을 가능성이 더 높습니다. (계속해서 그들의 테스트를 읽음으로써 역할을 바꿔보세요!)

[Gerard Meszaros](http://programmer.97things.oreilly.com/wiki/index.php/Gerard_Meszaros)가 작성함.