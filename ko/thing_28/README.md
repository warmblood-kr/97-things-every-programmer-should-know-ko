# 프로그램을 직립 자세로 못 박지 마라

한때 저는 패러디 C++ 퀴즈를 작성했는데, 그 안에서 예외 처리에 대한 다음 전략을 풍자적으로 제안했습니다:

> 코드베이스 전반에 걸친 풍부한 `try...catch` 구조들의 힘으로, 우리는 때때로 애플리케이션이 중단되는 것을 방지할 수 있습니다. 우리는 그 결과 상태를 "시체를 직립 자세로 못 박는 것"이라고 생각합니다.

농담에도 불구하고, 저는 실제로 쓰라린 경험 부인 슬하에서 받은 교훈을 요약하고 있었습니다.

그것은 우리만의 수제 C++ 라이브러리에 있는 기본 애플리케이션 클래스였습니다. 수년간 많은 프로그래머들의 손가락 찌르기를 당했습니다: 누구의 손도 깨끗하지 않았습니다. 그것은 다른 모든 것에서 탈출한 모든 예외를 처리하는 코드를 포함했습니다. Catch-22의 요사리안을 본받아, 우리는 결정했거나, 오히려 느꼈습니다(*결정했다*는 것은 이 괴물의 구성에 들어간 것보다 더 많은 생각을 암시합니다) 이 클래스의 인스턴스는 영원히 살거나 시도하다 죽어야 한다고.

이를 위해, 우리는 여러 예외 핸들러를 얽혔습니다. Windows의 구조화된 예외 처리를 네이티브 종류와 섞었습니다 (C++에서 `__try...__except`를 기억하시나요? 저도 기억 안 납니다). 예기치 않게 던져질 때, 매개변수를 더 세게 눌러서 다시 호출하려고 시도했습니다. 돌이켜보면, 다른 catch 절 안에서 내부 `try...catch` 핸들러를 작성할 때, 좋은 관행의 고속도로에서 미친 상태의 향기롭지만 건강하지 않은 골목으로 실수로 빠져나가는 지름길을 택했을지도 모른다는 어떤 종류의 인식이 저를 스쳐갔을 것이라고 생각하고 싶습니다. 하지만, 이는 아마도 후한 지혜일 것입니다.

말할 것도 없이, 이 클래스에 기반한 애플리케이션에서 뭔가 잘못될 때마다, 그들은 부두의 마피아 희생자들처럼 사라져서, 도대체 무슨 일이 일어났는지 나타내는 유용한 거품의 흔적을 남기지 않았습니다. 재앙을 기록하기로 되어 있던 덤프 루틴들에도 불구하고 말입니다. 결국 — 긴 결국 — 우리는 우리가 한 일을 점검하고, 부끄러움을 경험했습니다. 우리는 전체 엉망을 최소한이고 견고한 보고 메커니즘으로 교체했습니다. 하지만 이는 많은 크래시들이 지나간 후였습니다.

저는 이것으로 당신을 귀찮게 하지 않았을 것입니다 — 확실히 다른 누구도 우리만큼 바보일 수는 없을 테니까요 — 하지만 최근에 학술적 직함이 더 잘 알아야 한다고 선언하는 녀석과 온라인 논쟁을 했기 때문입니다. 우리는 원격 트랜잭션에서 Java 코드를 논의하고 있었습니다. 코드가 실패하면, 그는 *현장에서* 예외를 잡고 차단해야 한다고 주장했습니다. ("그럼 그것으로 *무엇을* 하겠다는 거야?" 제가 물었습니다. "저녁으로 요리하겠다고?")

그는 UI 디자이너의 규칙을 인용했습니다: 사용자에게 예외 보고서를 절대 보여주지 마라, 마치 이것이 대문자로 되어 있고 모든 것으로 문제를 해결하는 것처럼. 그가 사진이 허술한 블로그들을 장식하는 그런 블루스크린된 ATM들 중 하나의 코드에 책임이 있었는지, 그리고 영구적으로 트라우마를 입었는지 궁금합니다.

어쨌든, 만약 당신이 그를 만난다면, 고개를 끄덕이고 미소 짓고 주의를 기울이지 말고, 문으로 살금살금 다가가세요.

[Verity Stob](http://programmer.97things.oreilly.com/wiki/index.php/Verity_Stob)이 작성함.