# 올바른 알고리즘과 데이터 구조를 사용하라

> 많은 지점을 가진 큰 은행이 창구 직원들을 위해 산 새 컴퓨터들이 너무 느리다고 불평했습니다. 이것은 모든 사람이 전자 뱅킹을 사용하기 전이고 ATM이 지금처럼 널리 퍼지지 않았던 시절이었습니다. 사람들은 은행을 훨씬 더 자주 방문했고, 느린 컴퓨터들이 사람들을 줄 서게 만들고 있었습니다. 결과적으로, 은행은 공급업체와의 계약을 파기하겠다고 위협했습니다.

> 공급업체는 지연의 원인을 알아내기 위해 성능 분석 및 튜닝 전문가를 보냈습니다. 그는 곧 터미널에서 실행되는 특정 프로그램 하나가 거의 모든 CPU 용량을 소모하고 있다는 것을 발견했습니다. 프로파일링 도구를 사용하여, 그는 프로그램을 확대해서 보았고 원인이 되는 함수를 볼 수 있었습니다. 소스 코드는 다음과 같았습니다:

> ```
> for (i=0; i<strlen(s); ++i) {
>   if (... s[i] ...) ...
> }
> ```

> 그리고 문자열 s는 평균적으로 수천 글자 길이였습니다. (은행이 작성한) 코드는 빠르게 변경되었고, 은행 창구 직원들은 그 후로 행복하게 살았습니다....

프로그래머가 불필요하게 제곱으로 확장되는 코드를 사용하는 것보다 더 나아야 하지 않았을까요?
strlen에 대한 각 호출은 종료하는 null 문자를 찾기 위해 문자열의 수천 글자 각각을 순회했습니다. 하지만 문자열은 결코 변경되지 않았습니다. 미리 길이를 결정함으로써, 프로그래머는 수천 번의 strlen 호출(그리고 수백만 번의 루프 실행)을 절약할 수 있었을 것입니다:

```
n=strlen(s);
for (i=0; i<n; ++i) {
  if (... s[i] ...) ...
}
```

모든 사람이 마이크로 최적화의 함정을 피하기 위해 "먼저 작동하게 만들고, 그다음 빠르게 작동하게 만들라"는 격언을 알고 있습니다. 하지만 위의 예시는 프로그래머가 마키아벨리식 아다지오 "먼저 느리게 작동하게 만들라"를 따랐다고 거의 믿게 만들 것입니다.

이런 무사려함은 당신이 한 번 이상 마주칠 수 있는 것입니다. 그리고 이것은 단순히 "바퀴를 재발명하지 마라"는 것이 아닙니다. 때로는 초보 프로그래머들이 실제로 생각하지 않고 그냥 타이핑을 시작해서 갑자기 버블 정렬을 '발명'했습니다. 그들은 심지어 그것에 대해 자랑할 수도 있습니다.

올바른 알고리즘을 선택하는 것의 다른 면은 데이터 구조의 선택입니다. 큰 차이를 만들 수 있습니다: 당신이 검색하고 싶어하는 백만 개 항목의 컬렉션에 대해 연결 리스트를 사용하는 것 — 해시된 데이터 구조나 이진 트리와 비교해서 — 은 당신의 프로그래밍에 대한 사용자의 평가에 큰 영향을 미칠 것입니다.

프로그래머들은 바퀴를 재발명해서는 안 되고, 가능한 곳에서 기존 라이브러리를 사용해야 합니다. 하지만 은행과 같은 문제를 피할 수 있으려면, 그들은 또한 알고리즘과 그것들이 어떻게 확장되는지에 대해 교육받아야 합니다. 최신 텍스트 에디터들이 1980년대 워드스타 같은 구식 프로그램들만큼 느리게 만드는 것이 단지 화려한 장식일까요? 많은 사람들이 프로그래밍에서 재사용이 가장 중요하다고 말합니다. 하지만 무엇보다도, 프로그래머들은 언제, 무엇을, 그리고 어떻게 재사용할지 알아야 합니다. 그것을 할 수 있으려면 그들은 문제 영역과 알고리즘 및 데이터 구조에 대한 지식을 가져야 합니다.

좋은 프로그래머는 또한 언제 혐오스러운 알고리즘을 사용해야 하는지 알아야 합니다. 예를 들어, 문제 영역이 결코 5개 이상의 항목이 있을 수 없다고 지시한다면(야치 게임의 주사위 수처럼), 당신은 *항상* 최대 5개의 항목을 정렬해야 한다는 것을 알고 있습니다. 그 경우, 버블 정렬이 실제로 항목들을 정렬하는 가장 효율적인 방법일 수 있습니다. 모든 개가 자신의 날이 있습니다.

그러므로, 좋은 책들을 읽으세요 — 그리고 그것들을 이해하도록 하세요. 그리고 정말로 도널드 크누스의 *컴퓨터 프로그래밍의 예술*을 잘 읽는다면, 운이 좋을지도 모릅니다: 저자의 실수를 찾고 돈 크누스의 16진법 달러($2.56) 수표 중 하나를 받으세요.

[JC van Winkel](http://programmer.97things.oreilly.com/wiki/index.php/JC_van_Winkel)이 작성함.