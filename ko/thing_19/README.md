# 편의성은 -ility가 아니다

좋은 API를 설계하는 것의 중요성과 도전에 대해 많은 이야기가 있었습니다. 처음에 제대로 하기가 어렵고 나중에 바꾸기는 더욱 어렵습니다. 아이를 키우는 것과 비슷합니다. 대부분의 경험 있는 프로그래머들은 좋은 API가 일관된 추상화 수준을 따르고, 일관성과 대칭성을 보이며, 표현적인 언어를 위한 어휘를 형성한다는 것을 배웠습니다. 아쉽게도, 안내 원칙을 인식하는 것이 자동으로 적절한 행동으로 번역되지는 않습니다. 단 것을 먹는 것이 몸에 나쁘다는 것처럼 말입니다.

높은 곳에서 설교하는 대신, 저는 특정한 API 설계 '전략'을 꼬집고 싶습니다. 제가 계속해서 마주치는 것: 편의성이라는 논리입니다. 그것은 보통 다음과 같은 '통찰' 중 하나로 시작됩니다:

- 다른 클래스들이 이 한 가지 일을 하기 위해 두 번의 분리된 호출을 해야 하는 것을 원하지 않습니다.
- 이 메서드와 거의 같은 메서드라면 왜 다른 메서드를 만들어야 할까요? 간단한 스위치만 추가하겠습니다.
- 보세요, 매우 쉽습니다: 두 번째 문자열 매개변수가 ".txt"로 끝나면, 메서드가 자동으로 첫 번째 매개변수가 파일 이름이라고 가정하므로, 정말로 두 개의 메서드가 필요하지 않습니다.

좋은 의도이지만, 그런 논리는 API를 사용하는 코드의 가독성을 떨어뜨리기 쉽습니다. 다음과 같은 메서드 호출은

```
parser.processNodes(text, false);
```

구현을 알거나 적어도 문서를 참조하지 않고는 사실상 의미가 없습니다. 이 메서드는 호출자의 편의가 아니라 구현자의 편의를 위해 설계되었을 가능성이 높습니다 — "호출자가 두 번의 분리된 호출을 해야 하는 것을 원하지 않는다"가 "두 개의 분리된 메서드를 코딩하고 싶지 않다"로 번역된 것입니다. 편의성이 지루함, 어색함, 또는 꼴사나움의 해독제가 되려는 의도라면 근본적으로 잘못된 것은 없습니다. 하지만 좀 더 신중하게 생각해보면, 그런 증상들의 해독제는 반드시 편의성이 아니라 효율성, 일관성, 그리고 우아함입니다. API는 기본적인 복잡성을 숨기기로 되어 있으므로, 좋은 API 설계가 어느 정도 노력을 요구할 것이라고 현실적으로 기대할 수 있습니다. 하나의 큰 메서드가 확실히 잘 생각된 작업들의 집합보다 작성하기 더 편리할 수 있지만, 사용하기 더 쉬울까요?

API를 언어로 보는 은유는 이런 상황에서 더 나은 설계 결정으로 우리를 안내할 수 있습니다. API는 표현적인 언어를 제공해야 하며, 이는 위의 다음 계층에 유용한 질문을 묻고 답할 충분한 어휘를 줍니다. 이것이 묻는 가치가 있을 수 있는 각 질문에 대해 정확히 하나의 메서드, 또는 동사를 제공해야 한다는 것을 의미하지는 않습니다. 다양한 어휘는 의미의 미묘함을 표현할 수 있게 해줍니다. 예를 들어, 본질적으로 같은 작업이지만 다른 속도로 실행되는 것으로 볼 수 있음에도 불구하고 walk(true) 대신 run이라고 말하는 것을 선호합니다. 일관되고 잘 생각된 API 어휘는 위의 다음 계층에서 표현적이고 이해하기 쉬운 코드를 만듭니다. 더 중요하게는, 조합 가능한 어휘는 다른 프로그래머들이 당신이 예상하지 못했던 방식으로 API를 사용할 수 있게 해줍니다 — API 사용자들에게는 정말로 큰 편의입니다! 다음 번에 몇 가지를 하나의 API 메서드로 묶고 싶은 유혹이 든다면, 영어에는 그렇게 자주 요청되는 작업임에도 불구하고 `MakeUpYourRoomBeQuietAndDoYourHomeWork`에 대한 한 단어가 없다는 것을 기억하세요.

[Gregor Hohpe](http://programmer.97things.oreilly.com/wiki/index.php/Gregor_Hohpe)가 작성함.