# 단일 책임 원칙

좋은 설계의 가장 기초적인 원칙 중 하나는:

> 같은 이유로 변경되는 것들은 함께 모으고, 다른 이유로 변경되는 것들은 분리하라.

이 원칙은 종종 *단일 책임 원칙*(Single Responsibility Principle) 또는 SRP로 알려져 있습니다. 간단히 말해서, 그것은 서브시스템, 모듈, 클래스, 또는 심지어 함수가 변경해야 할 이유를 하나 이상 가져서는 안 된다고 말합니다. 고전적인 예는 비즈니스 규칙, 보고서, 그리고 데이터베이스를 다루는 메서드들을 가진 클래스입니다:

```
public class Employee {
  public Money calculatePay() ...
  public String reportHours() ...
  public void save() ...
}
```

일부 프로그래머들은 이 세 함수를 같은 클래스에 함께 두는 것이 완전히 적절하다고 생각할 수 있습니다. 결국, 클래스들은 공통 변수들을 조작하는 함수들의 컬렉션이어야 합니다. 하지만 문제는 세 함수가 완전히 다른 이유로 변경된다는 것입니다. `calculatePay` 함수는 급여 계산을 위한 비즈니스 규칙이 변경될 때마다 변경될 것입니다. `reportHours` 함수는 누군가가 보고서에 대해 다른 형식을 원할 때마다 변경될 것입니다. save 함수는 DBA들이 데이터베이스 스키마를 변경할 때마다 변경될 것입니다. 이 세 가지 변경 이유들이 결합되어 `Employee`를 매우 불안정하게 만듭니다. 그것은 그 이유들 중 어떤 것 때문에든 변경될 것입니다. 더 중요하게는, `Employee`에 의존하는 어떤 클래스들도 그런 변경들에 의해 영향을 받을 것입니다.

좋은 시스템 설계는 시스템을 독립적으로 배포될 수 있는 컴포넌트들로 분리하는 것을 의미합니다. 독립적 배포는 한 컴포넌트를 변경해도 다른 것들을 다시 배포할 필요가 없다는 것을 의미합니다. 하지만 `Employee`가 다른 컴포넌트들의 많은 다른 클래스들에 의해 많이 사용된다면, Employee에 대한 모든 변경은 다른 컴포넌트들이 다시 배포되게 할 가능성이 높습니다; 따라서 컴포넌트 설계의 주요 이점을 무효화시킵니다(또는 더 유행하는 이름을 선호한다면 SOA).

```
public class Employee {
  public Money calculatePay() ...
}

public class EmployeeReporter {
  public String reportHours(Employee e) ...
}

public class EmployeeRepository {
  public void save(Employee e) ...
}
```

위에 보여진 간단한 분할이 문제들을 해결합니다. 이 클래스들 각각은 자신만의 컴포넌트에 배치될 수 있습니다. 또는 오히려, 모든 보고 클래스들은 보고 컴포넌트로 갈 수 있습니다. 모든 데이터베이스 관련 클래스들은 저장소 컴포넌트로 갈 수 있습니다. 그리고 모든 비즈니스 규칙은 비즈니스 규칙 컴포넌트로 갈 수 있습니다.

기민한 독자는 위 해결책에 여전히 의존성들이 있다는 것을 볼 것입니다. `Employee`가 여전히 다른 클래스들에 의해 의존된다는 것입니다. 그래서 `Employee`가 수정되면, 다른 클래스들은 아마도 다시 컴파일되고 다시 배포되어야 할 것입니다. 따라서 `Employee`는 수정되고 나서 독립적으로 배포될 수 없습니다. 하지만 다른 클래스들은 수정되고 독립적으로 배포될 수 있습니다. 그것들 중 하나의 수정도 다른 것들 중 어떤 것도 다시 컴파일되거나 다시 배포되도록 강요할 수 없습니다. `Employee`조차도 *의존성 역전 원칙*(Dependency Inversion Principle, DIP)의 신중한 사용을 통해 독립적으로 배포될 수 있지만, 그것은 [다른 책](http://www.amazon.com/dp/0135974445/)의 주제입니다.

다른 이유로 변경되는 것들을 분리하는 SRP의 신중한 적용은 독립적으로 배포 가능한 컴포넌트 구조를 가진 설계를 만드는 열쇠 중 하나입니다.

[Uncle Bob](http://programmer.97things.oreilly.com/wiki/index.php/Uncle_Bob)이 작성함.