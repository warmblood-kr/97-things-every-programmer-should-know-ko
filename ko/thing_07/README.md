# 공유에 유의하라

이것은 회사에서의 첫 번째 프로젝트였습니다. 저는 방금 학위를 마친 상태였고, 스스로를 증명하고 싶어 매일 늦게까지 남아 기존 코드를 살펴보았습니다. 첫 번째 기능을 작업하면서 제가 배운 모든 것을 적용하기 위해 더욱 신경썼습니다 — 주석 달기, 로깅, 가능하면 공통 코드를 라이브러리로 빼내기 등등. 제가 그렇게 준비가 되었던 코드 리뷰는 저를 무섭게 깨우치는 경험이었습니다 — 재사용은 반대당했습니다!

이게 어떻게 가능할까요? 대학 시절 내내 재사용은 양질의 소프트웨어 공학의 정수로 여겨졌습니다. 제가 읽었던 모든 기사, 교과서, 저를 가르쳤던 경험 많은 소프트웨어 전문가들. 이 모든 것이 잘못된 것일까요?

결국 제가 놓치고 있던 중요한 것이 있었습니다.

맥락(Context).

시스템의 매우 다른 두 부분이 동일한 방식으로 몇 가지 로직을 수행한다는 사실은 제가 생각했던 것보다 덜 중요했습니다. 제가 그 공통 코드의 라이브러리를 뽑아내기 전까지, 이 부분들은 서로 의존성이 없었습니다. 각 부분은 독립적으로 발전할 수 있었습니다. 각자는 시스템의 변화하는 비즈니스 환경의 필요에 맞게 자신의 로직을 변경할 수 있었습니다. 그 유사한 코드의 네 줄은 우연한 일이었습니다 — 일시적인 이상 현상, 우연의 일치였습니다. 즉, 제가 등장하기 전까지는 말입니다.

제가 만든 공통 코드의 라이브러리는 각 발의 신발 끈을 서로 묶는 역할을 했습니다. 한 비즈니스 도메인에서의 단계는 다른 도메인과 먼저 동기화하지 않으면 진행할 수 없었습니다. 그 독립적인 기능의 유지보수 비용은 미미했지만, 공통 라이브러리는 훨씬 더 많은 테스트를 요구했습니다.

저는 시스템의 코드 라인 수는 줄였지만, 의존성의 수는 늘렸습니다. 이러한 의존성의 맥락은 매우 중요합니다 — 만약 그 의존성이 국한되었다면, 그것은 정당화될 수 있었고 긍정적인 가치를 가질 수 있었을 것입니다. 이러한 의존성이 제대로 통제되지 않으면, 그 덩굴손이 시스템의 더 큰 문제들(concerns)을 얽어지게 만들지만 코드 자체는 괜찮아 보입니다.

이러한 실수는 근본적으로 좋은 아이디어처럼 들리기 때문에 교묘합니다. 올바른 맥락에서 적용되었을 때, 이러한 기술은 가치가 있습니다. 잘못된 맥락에서는 가치를 증가시키기보다는 비용만 증가시킵니다. 다양한 부분이 사용될 맥락에 대한 전혀 지식 없이 기존 코드베이스에 들어갈 때, 요즘 저는 공유되는 내용에 대해 훨씬 더 주의 깊습니다.

공유에 주의하라. 당신의 맥락을 점검하라. 그때 비로소 진행하라.

[Udi Dahan](http://programmer.97things.oreilly.com/wiki/index.php/Udi_Dahan)이 씀
